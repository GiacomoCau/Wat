<!DOCTYPE html>
<html>
  <head>
    <title>
      28. Options
    </title>
    <meta charset="UTF-8"/>
    <style>
      body { margin-left: 2%; }
      ul { list-style-type: none; }
      a { text-decoration: none; }
    </style>
  </head>
  <body>
    <br/>
    <a href="https://htmlpreview.github.io?https://github.com/GiacomoCau/Wat/blob/main/reference/reference27.html">
      <input type="button" value="&lt;"/>
    </a>
    <a href="https://htmlpreview.github.io?https://github.com/GiacomoCau/Wat/blob/main/reference/reference.html">
      <input type="button" value="^"/>
    </a>
    <a href="https://htmlpreview.github.io?https://github.com/GiacomoCau/Wat/blob/main/reference/reference29.html">
      <input type="button" value="&gt;"/>
    </a>
    <h2>
      28. Options
    </h2>
    <ul>
      <li>
        An option is either #null (&quot;none&quot;), or a one-element list (&quot;some&quot;).
        <br/>
          Idea from Taylor R. Campbell's blag. https://mumble.net/~campbell/blag.txt
      </li>
    </ul>
    <div>
      <h3>
        some
      </h3>
      <ul>
        <li>
          Create a one-element list from the <b>value</b>.
          <br/>
            Alias of cons!.
        </li>
      </ul>
    </div>
    <div>
      <h3>
        ifOpt
      </h3>
      <ul>
        <li>
          Single-value <b>option</b> destructuring.
          <br/>
            Evaluate the <b>then</b> form with the <b>name</b> bound to the contents of the <b>option</b> if the evaluation of <b>option</b> is !#null,
          <br/>
            evaluate the <b>else</b> forms as an implicit `begin' otherwise.
          <br/>
            &nbsp;
          <br/>
            (ifOpt (name option) then . else)
          <br/>
            (type fexpr)
        </li>
      </ul>
    </div>
    <div>
      <h3>
        ifOpt*
      </h3>
      <ul>
        <li>
          Multi-valued <b>option</b> destructuring.
          <br/>
            Evaluate <b>then</b> form with the <b>definiendTree</b> bound to <b>option</b> value if the evaluation of <b>option</b> is !#null,
          <br/>
            evaluate the <b>else</b> forms as an implicit `begin' otherwise.
          <br/>
            &nbsp;
          <br/>
            (ifOpt* (definiendTree option) then . else)
        </li>
      </ul>
    </div>
    <div>
      <h3>
        whenOpt
      </h3>
      <ul>
        <li>
          Destructure the <b>option</b>.
          <br/>
            Return #null if the evaluation of <b>option</b> it's #null,
          <br/>
            evaluate <b>forms</b> as an implicit `begin' with the <b>name</b> bound to the contents of the <b>option</b>, otherwise.
          <br/>
            &nbsp;
          <br/>
            (whenOpt (name option) . forms)
          <br/>
            (type fexpr)
        </li>
      </ul>
    </div>
    <div>
      <h3>
        unlessOpt
      </h3>
      <ul>
        <li>
          Destructure the <b>option</b>.
          <br/>
            Return the evaluation of <b>forms</b> as an implicit `begin' if the evaluation of <b>option</b> is #null, #null otherwise.
          <br/>
            &nbsp;
          <br/>
            (unlessOpt option . forms)
          <br/>
            (type fexpr)
        </li>
      </ul>
    </div>
    <div>
      <h3>
        caseOpt
      </h3>
      <ul>
        <li>
          Multi-armed ifOpt.
          <br/>
            Evaluate <b>option</b> and go through the <b>clauses</b> in order.
          <br/>
            If <b>option</b> is #null return #null.
          <br/>
            If <b>clauses</b> is #null return #null.
          <br/>
            If `car' of <b>clause</b> is else evaluate <b>forms</b> as an implicit `begin'.
          <br/>
            If the <b>option</b> match the <b>definiendTree</b> evaluate <b>forms</b> as an implicit `begin' into resulting <b>environment</b>.
          <br/>
            Otherwise go to the next <b>clause</b>.
          <br/>
            &nbsp;
          <br/>
            (caseOpt option . clauses)
          <br/>
            (type fexpr)
          <br/>
            &nbsp;
          <br/>
            (syntax clauses (clause . clauses))
          <br/>
            (syntax clause (else . forms))
          <br/>
            (syntax clause (definiendTree . forms))
        </li>
      </ul>
    </div>
    <div>
      <h3>
        optDft
      </h3>
      <ul>
        <li>
          Return the contents of the <b>option</b> if the option is !#null,
          <br/>
            the evaluation if <b>default</b> if present, #inert otherwise.
          <br/>
            The <b>default</b> is evaluated lazily, only when the <b>option</b> is #null.
          <br/>
            &nbsp;
          <br/>
            (optDft option . default)
          <br/>
            (type fexpr)
        </li>
      </ul>
    </div>
    <div>
      <h3>
        optDft*
      </h3>
      <ul>
        <li>
          Similar to `optdft', but provides <b>default</b> for any elements of <b>list</b>.
          <br/>
            This is useful for implementing functions that take multiple optional arguments.
          <br/>
            Each <b>default</b> is evaluated lazily, only when needed.
          <br/>
            &nbsp;
          <br/>
            (optDft* list . defaults)
          <br/>
            (type fexpr)
          <br/>
            &nbsp;
          <br/>
            (syntax defaults (default . defaults))
        </li>
      </ul>
    </div>
    <div>
      <h3>
        optDft!
      </h3>
      <ul>
        <li>
          Returns the contents of the <b>option</b> or signals an error if it is #null.
          <br/>
            &nbsp;
          <br/>
            (optDft! option)
          <br/>
            (type fexpr)
        </li>
      </ul>
    </div>
    <br/>
    <a href="https://htmlpreview.github.io?https://github.com/GiacomoCau/Wat/blob/main/reference/reference27.html">
      <input type="button" value="&lt;"/>
    </a>
    <a href="https://htmlpreview.github.io?https://github.com/GiacomoCau/Wat/blob/main/reference/reference.html">
      <input type="button" value="^"/>
    </a>
    <a href="https://htmlpreview.github.io?https://github.com/GiacomoCau/Wat/blob/main/reference/reference29.html">
      <input type="button" value="&gt;"/>
    </a>
  </body>
</html>
